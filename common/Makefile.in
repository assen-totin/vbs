# This file is a part of Voody Blue Subtitler suit.
# 
# Author: Assen Totin <assen.totin@gmail.com>
#
# Home page: http://bilbo.online.bg/~assen/vbs
#
# This software is released under GNU General Public License.
# See the LICENSE file for details or visit http://www.gnu.org/copyleft/gpl.html 
# for details.

CC = @MAKEFILE_CC@

CFLAGS = -c -O2

OBJS = cfg.o error.o network.o util.o menu.o 

IMGDIR = @IMGDIR@

INCLUDES=`pkg-config --cflags gtk+-3.0`

TARGET = cfg

HAVE_GSTREAMER = @HAVE_GSTREAMER@
ifeq ($(HAVE_GSTREAMER),1)
        ADD_INCLUDES = `pkg-config --cflags gstreamer-0.10`
endif

all: $(TARGET)

clean:
	rm -f $(OBJS) $(TARGET)

distclean:
	make clean
	rm -f Makefile

$(TARGET): cfg.c error.c network.c util.c menu.c
	$(CC) $(CFLAGS) $(INCLUDES) $(ADD_INCLUDES) error.c
	$(CC) $(CFLAGS) $(INCLUDES) $(ADD_INCLUDES) cfg.c
	$(CC) $(CFLAGS) $(INCLUDES) $(ADD_INCLUDES) network.c
	$(CC) $(CFLAGS) $(INCLUDES) $(ADD_INCLUDES) util.c
	$(CC) $(CFLAGS) $(INCLUDES) $(ADD_INCLUDES) menu.c

install:
	test -z $(IMGDIR) || mkdir -p $(IMGDIR)
	cp -f vbs.png  $(IMGDIR)
	gtk-update-icon-cache -f -t

uninstall:
	rm -f $(IMGDIR)/vbs.png
	gtk-update-icon-cache -f -t

